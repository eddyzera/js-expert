function cov_145nml1i6k(){var path="/home/edsilva/curso-javascript/js-expert/modulo-javascript-testing/project/src/service/carService.js";var hash="544982bfe789997d2d284fb0b090967626c5ca50";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/edsilva/curso-javascript/js-expert/modulo-javascript-testing/project/src/service/carService.js",statementMap:{"0":{start:{line:1,column:23},end:{line:1,column:67}},"1":{start:{line:2,column:20},end:{line:2,column:61}},"2":{start:{line:3,column:12},end:{line:3,column:38}},"3":{start:{line:7,column:4},end:{line:7,column:59}},"4":{start:{line:8,column:4},end:{line:8,column:46}},"5":{start:{line:9,column:4},end:{line:12,column:6}},"6":{start:{line:16,column:23},end:{line:16,column:34}},"7":{start:{line:17,column:4},end:{line:19,column:5}},"8":{start:{line:23,column:27},end:{line:23,column:78}},"9":{start:{line:24,column:18},end:{line:24,column:52}},"10":{start:{line:26,column:4},end:{line:26,column:16}},"11":{start:{line:30,column:18},end:{line:30,column:51}},"12":{start:{line:31,column:16},end:{line:31,column:52}},"13":{start:{line:32,column:4},end:{line:32,column:14}},"14":{start:{line:36,column:20},end:{line:36,column:28}},"15":{start:{line:37,column:22},end:{line:37,column:33}},"16":{start:{line:38,column:26},end:{line:38,column:92}},"17":{start:{line:38,column:59},end:{line:38,column:91}},"18":{start:{line:40,column:24},end:{line:40,column:54}},"19":{start:{line:41,column:27},end:{line:41,column:65}},"20":{start:{line:43,column:4},end:{line:43,column:25}},"21":{start:{line:47,column:16},end:{line:47,column:55}},"22":{start:{line:48,column:23},end:{line:48,column:90}},"23":{start:{line:49,column:18},end:{line:49,column:28}},"24":{start:{line:50,column:4},end:{line:50,column:49}},"25":{start:{line:51,column:20},end:{line:51,column:70}},"26":{start:{line:52,column:20},end:{line:52,column:62}},"27":{start:{line:54,column:24},end:{line:59,column:6}},"28":{start:{line:61,column:4},end:{line:61,column:22}},"29":{start:{line:65,column:0},end:{line:65,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:24},end:{line:13,column:3}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:31},end:{line:27,column:3}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:37},end:{line:33,column:3}},line:29},"4":{name:"(anonymous_4)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:59},end:{line:44,column:3}},line:35},"5":{name:"(anonymous_5)",decl:{start:{line:38,column:52},end:{line:38,column:53}},loc:{start:{line:38,column:59},end:{line:38,column:91}},line:38},"6":{name:"(anonymous_6)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:50},end:{line:62,column:3}},line:46}},branchMap:{"0":{loc:{start:{line:38,column:59},end:{line:38,column:91}},type:"binary-expr",locations:[{start:{line:38,column:59},end:{line:38,column:74}},{start:{line:38,column:78},end:{line:38,column:91}}],line:38}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"544982bfe789997d2d284fb0b090967626c5ca50"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_145nml1i6k=function(){return actualCoverage;};}return actualCoverage;}cov_145nml1i6k();const BaseRepository=(cov_145nml1i6k().s[0]++,require('../repository/base/baseRepository'));const Transaction=(cov_145nml1i6k().s[1]++,require('../../src/entities/transaction'));const Tax=(cov_145nml1i6k().s[2]++,require('../entities/tax'));class CarService{constructor({cars}){cov_145nml1i6k().f[0]++;cov_145nml1i6k().s[3]++;this.carRepository=new BaseRepository({file:cars});cov_145nml1i6k().s[4]++;this.taxesBasedOnAge=Tax.taxesBasedOnAge;cov_145nml1i6k().s[5]++;this.currencyFormat=new Intl.NumberFormat('pt-br',{style:'currency',currency:'BRL'});}getRandomPositionFromArray(list){cov_145nml1i6k().f[1]++;const listLength=(cov_145nml1i6k().s[6]++,list.length);cov_145nml1i6k().s[7]++;return Math.floor(Math.random()*listLength);}chooseRandomCar(carCategory){cov_145nml1i6k().f[2]++;const randomCarIndex=(cov_145nml1i6k().s[8]++,this.getRandomPositionFromArray(carCategory.carIds));const carId=(cov_145nml1i6k().s[9]++,carCategory.carIds[randomCarIndex]);cov_145nml1i6k().s[10]++;return carId;}async getAvailableCar(carCategory){cov_145nml1i6k().f[3]++;const carId=(cov_145nml1i6k().s[11]++,this.chooseRandomCar(carCategory));const car=(cov_145nml1i6k().s[12]++,await this.carRepository.find(carId));cov_145nml1i6k().s[13]++;return car;}calculateFinalPrice(customer,carCategory,numberOfDays){cov_145nml1i6k().f[4]++;const{age}=(cov_145nml1i6k().s[14]++,customer);const{price}=(cov_145nml1i6k().s[15]++,carCategory);const{then:tax}=(cov_145nml1i6k().s[16]++,this.taxesBasedOnAge.find(tax=>{cov_145nml1i6k().f[5]++;cov_145nml1i6k().s[17]++;return(cov_145nml1i6k().b[0][0]++,age>=tax.from)&&(cov_145nml1i6k().b[0][1]++,age<=tax.to);}));const finalPrice=(cov_145nml1i6k().s[18]++,tax*price*numberOfDays);const formattedPrice=(cov_145nml1i6k().s[19]++,this.currencyFormat.format(finalPrice));cov_145nml1i6k().s[20]++;return formattedPrice;}async rent(customer,carCategory,numberOfDays){cov_145nml1i6k().f[6]++;const car=(cov_145nml1i6k().s[21]++,await this.getAvailableCar(carCategory));const finalPrice=(cov_145nml1i6k().s[22]++,await this.calculateFinalPrice(customer,carCategory,numberOfDays));const today=(cov_145nml1i6k().s[23]++,new Date());cov_145nml1i6k().s[24]++;today.setDate(today.getDate()+numberOfDays);const options=(cov_145nml1i6k().s[25]++,{year:'numeric',month:'long',day:'numeric'});const dueDate=(cov_145nml1i6k().s[26]++,today.toLocaleDateString('pt-br',options));const transaction=(cov_145nml1i6k().s[27]++,new Transaction({customer,dueDate,car,amount:finalPrice}));cov_145nml1i6k().s[28]++;return transaction;}}cov_145nml1i6k().s[29]++;module.exports=CarService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsInJlcXVpcmUiLCJUcmFuc2FjdGlvbiIsIlRheCIsIkNhclNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNhcnMiLCJjYXJSZXBvc2l0b3J5IiwiZmlsZSIsInRheGVzQmFzZWRPbkFnZSIsImN1cnJlbmN5Rm9ybWF0IiwiSW50bCIsIk51bWJlckZvcm1hdCIsInN0eWxlIiwiY3VycmVuY3kiLCJnZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheSIsImxpc3QiLCJsaXN0TGVuZ3RoIiwibGVuZ3RoIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hvb3NlUmFuZG9tQ2FyIiwiY2FyQ2F0ZWdvcnkiLCJyYW5kb21DYXJJbmRleCIsImNhcklkcyIsImNhcklkIiwiZ2V0QXZhaWxhYmxlQ2FyIiwiY2FyIiwiZmluZCIsImNhbGN1bGF0ZUZpbmFsUHJpY2UiLCJjdXN0b21lciIsIm51bWJlck9mRGF5cyIsImFnZSIsInByaWNlIiwidGhlbiIsInRheCIsImZyb20iLCJ0byIsImZpbmFsUHJpY2UiLCJmb3JtYXR0ZWRQcmljZSIsImZvcm1hdCIsInJlbnQiLCJ0b2RheSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIm9wdGlvbnMiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJkdWVEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidHJhbnNhY3Rpb24iLCJhbW91bnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiY2FyU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBCYXNlUmVwb3NpdG9yeSA9IHJlcXVpcmUoJy4uL3JlcG9zaXRvcnkvYmFzZS9iYXNlUmVwb3NpdG9yeScpXG5jb25zdCBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3NyYy9lbnRpdGllcy90cmFuc2FjdGlvbicpXG5jb25zdCBUYXggPSByZXF1aXJlKCcuLi9lbnRpdGllcy90YXgnKVxuXG5jbGFzcyBDYXJTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoeyBjYXJzIH0pIHtcbiAgICB0aGlzLmNhclJlcG9zaXRvcnkgPSBuZXcgQmFzZVJlcG9zaXRvcnkoeyBmaWxlOiBjYXJzIH0pXG4gICAgdGhpcy50YXhlc0Jhc2VkT25BZ2UgPSBUYXgudGF4ZXNCYXNlZE9uQWdlXG4gICAgdGhpcy5jdXJyZW5jeUZvcm1hdCA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCgncHQtYnInLCB7XG4gICAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICAgIGN1cnJlbmN5OiAnQlJMJyxcbiAgICB9KVxuICB9XG5cbiAgZ2V0UmFuZG9tUG9zaXRpb25Gcm9tQXJyYXkobGlzdCkge1xuICAgIGNvbnN0IGxpc3RMZW5ndGggPSBsaXN0Lmxlbmd0aFxuICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgTWF0aC5yYW5kb20oKSAqIChsaXN0TGVuZ3RoKVxuICAgIClcbiAgfVxuXG4gIGNob29zZVJhbmRvbUNhcihjYXJDYXRlZ29yeSkge1xuICAgIGNvbnN0IHJhbmRvbUNhckluZGV4ID0gdGhpcy5nZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheShjYXJDYXRlZ29yeS5jYXJJZHMpXG4gICAgY29uc3QgY2FySWQgPSBjYXJDYXRlZ29yeS5jYXJJZHNbcmFuZG9tQ2FySW5kZXhdXG5cbiAgICByZXR1cm4gY2FySWRcbiAgfVxuXG4gIGFzeW5jIGdldEF2YWlsYWJsZUNhcihjYXJDYXRlZ29yeSkge1xuICAgIGNvbnN0IGNhcklkID0gdGhpcy5jaG9vc2VSYW5kb21DYXIoY2FyQ2F0ZWdvcnkpXG4gICAgY29uc3QgY2FyID0gYXdhaXQgdGhpcy5jYXJSZXBvc2l0b3J5LmZpbmQoY2FySWQpXG4gICAgcmV0dXJuIGNhclxuICB9XG5cbiAgY2FsY3VsYXRlRmluYWxQcmljZShjdXN0b21lciwgY2FyQ2F0ZWdvcnksIG51bWJlck9mRGF5cykge1xuICAgIGNvbnN0IHsgYWdlIH0gPSBjdXN0b21lclxuICAgIGNvbnN0IHsgcHJpY2UgfSA9IGNhckNhdGVnb3J5XG4gICAgY29uc3QgeyB0aGVuOiB0YXggfSA9IHRoaXMudGF4ZXNCYXNlZE9uQWdlLmZpbmQodGF4ID0+IGFnZSA+PSB0YXguZnJvbSAmJiBhZ2UgPD0gdGF4LnRvKVxuXG4gICAgY29uc3QgZmluYWxQcmljZSA9ICgodGF4ICogcHJpY2UpICogKG51bWJlck9mRGF5cykpXG4gICAgY29uc3QgZm9ybWF0dGVkUHJpY2UgPSB0aGlzLmN1cnJlbmN5Rm9ybWF0LmZvcm1hdChmaW5hbFByaWNlKVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZFByaWNlXG4gIH1cblxuICBhc3luYyByZW50KGN1c3RvbWVyLCBjYXJDYXRlZ29yeSwgbnVtYmVyT2ZEYXlzKSB7XG4gICAgY29uc3QgY2FyID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVDYXIoY2FyQ2F0ZWdvcnkpXG4gICAgY29uc3QgZmluYWxQcmljZSA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlRmluYWxQcmljZShjdXN0b21lciwgY2FyQ2F0ZWdvcnksIG51bWJlck9mRGF5cylcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICB0b2RheS5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIG51bWJlck9mRGF5cylcbiAgICBjb25zdCBvcHRpb25zID0geyB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnIH1cbiAgICBjb25zdCBkdWVEYXRlID0gdG9kYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCdwdC1icicsIG9wdGlvbnMpXG5cbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih7XG4gICAgICBjdXN0b21lcixcbiAgICAgIGR1ZURhdGUsXG4gICAgICBjYXIsXG4gICAgICBhbW91bnQ6IGZpbmFsUHJpY2VcbiAgICB9KVxuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYXJTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiNnZIQWVZO0FBQUEsMkZBZlosS0FBTUEsZUFB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